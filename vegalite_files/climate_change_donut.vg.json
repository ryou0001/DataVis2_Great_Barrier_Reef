{
"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
"background": "aquamarine",
    "config": {"view": {"stroke": "transparent"}},
"hconcat": [
  {
  "width": 200,
  "height": 120,
  "view": {"stroke": null},
  "layer": [
          {
          "data": {"url": "vegalite_files/data/resident_threatsx.csv"},
          "transform": [
            {"filter": "datum.NRM == 'GBR Region'"},
            {"calculate": "datum.threat_total/datum.total_interviewed", "as": "threat_perc"}
          ],
          "mark": {"type": "bar"},
          "encoding": {
              "x": {"field": "threat", "type": "nominal", "sort": "-y", "axis": null},
              "y": {"field": "threat_perc", "type": "quantitative", "axis": null, "title": null},
            "color": {
              "condition": {
                "test": "datum.threat == 'climate change'",
                "value": "red"
              }, "value": "darkgrey"
              },              "tooltip": [
                {"field": "threat", "title": "Threat"},
                {"field": "threat_perc", "format": ".2%", "title": "Percentage of residents said it was a top-3 threat"}
              ]

            }        
          },
          {
            "data": {
              "values": [{"label": "41%"}]
            },
            "mark": {
              "type": "text", 
              "fill": "black", 
              "align": "center", 
              "baseline": "middle", 
              "dy": -20,
              "dx": 40,
              "fontSize": 28
            },
            "encoding": {
              "text": {"field": "label"}
            }
          },
                    {
            "data": {
              "values": [{"label": ["residents concerned","about climate change"]}]
            },
            "mark": {
              "type": "text", 
              "fill": "black", 
              "align": "center", 
              "baseline": "middle", 
              "dy": 0,
              "dx": 40,
              "fontSize": 12
            },
            "encoding": {
              "text": {"field": "label"}
            }
          }

        ]
  }
]
}