{
"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
"datasets": {
    "QLD_label": {"state": "QUEENSLAND", "x": 146, "y": -27.5}
},
"concat": [
    {
        "width": 303,
        "height": 360,
        "title": { "text": "Global Warming" },
        "projection": {"type": "mercator"},
        "view": {"fill": "white"},
        "layer": [
            {
            "data": {
                "name": "GBR_boundary",
                "url": "vegalite_files/maps/GBR_boundary.json",
                "format": {"type": "topojson", "feature": "GBR_boundary"}
            },
            "mark": {"type": "geoshape", "fill": "lightgray", "opacity": 0.5}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland_surrounds.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "darkgray"}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "white", "stroke": "darkgray"}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/NRM_regions_2020.json",
                    "format": {"type": "topojson", "feature": "NRM_regions_2020"}
                },
                "transform": [{
                    "lookup": "properties.NRM_REGION",
                    "from": {
                        "data": {"url": "vegalite_files/data/resident_threats.csv"},
                        "key": "NRM",
                        "fields": ["population", "perc_interviewed", "climate_change_total", "climate_change_perc"]
                    }
                }],
                "mark": {
                    "type": "geoshape", 
                    "stroke": "darkgray",
                    "opacity": 0.5
                },
                "encoding": {
                    "color": {
                        "field": "climate_change_perc",
                        "type": "quantitative",
                        "scale": {
                            "domain": [0,0.45]
                        },
                    "legend": {
                        "title": "% of residents"
                    }
                    },
                    "tooltip": [
                        {"field": "properties.NRM_REGION", "type": "nominal", "title": "NRM Region"},
                        {"field": "population", "type": "quantitative", "title": "Population", "format": ","},
                        {"field": "perc_interviewed", "type": "quantitative", "title": "Percentage of population interviewed", "format": ".3%"},
                        {"field": "climate_change_total", "type": "quantitative", "title": "Total number of interviewed residents concerned about threat"},
                        {"field": "climate_change_perc", "type": "quantitative", "title": "Percentage of interviewed residents concerned about threat", "format": ".2%"}
                    ]
                }
            },
            {
            "data": {"name": "QLD_label"},
            "mark": {"type": "text", "fontSize": 20, "color": "darkgray"},
            "encoding": {
                "text": {"field": "state", "type": "nominal"},
                "longitude": {"field": "x"}, 
                "latitude": {"field": "y"}}
            }
        ]
    },{
        "width": 303,
        "height": 360,
        "title": { "text": "Coral Bleaching" },
        "projection": {"type": "mercator"},
        "view": {"fill": "white"},
        "layer": [
            {
            "data": {
                "name": "GBR_boundary",
                "url": "vegalite_files/maps/GBR_boundary.json",
                "format": {"type": "topojson", "feature": "GBR_boundary"}
            },
            "mark": {"type": "geoshape", "fill": "lightgray", "opacity": 0.5}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland_surrounds.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "darkgray"}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "white", "stroke": "darkgray"}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/NRM_regions_2020.json",
                    "format": {"type": "topojson", "feature": "NRM_regions_2020"}
                },
                "transform": [{
                    "lookup": "properties.NRM_REGION",
                    "from": {
                        "data": {"url": "vegalite_files/data/resident_threats.csv"},
                        "key": "NRM",
                        "fields": ["population", "perc_interviewed", "bleaching_total", "bleaching_perc"]
                    }
                }],
                "mark": {
                    "type": "geoshape", 
                    "stroke": "darkgray",
                    "opacity": 0.5
                },
                "encoding": {
                    "color": {
                        "field": "bleaching_perc",
                        "type": "quantitative",
                        "scale": {
                            "domain": [0,0.45]
                        },
                    "legend": {
                        "title": "% of residents"
                    }
                    },
                    "tooltip": [
                        {"field": "properties.NRM_REGION", "type": "nominal", "title": "NRM Region"},
                        {"field": "population", "type": "quantitative", "title": "Population", "format": ","},
                        {"field": "perc_interviewed", "type": "quantitative", "title": "Percentage of population interviewed", "format": ".3%"},
                        {"field": "bleaching_total", "type": "quantitative", "title": "Total number of interviewed residents concerned about threat"},
                        {"field": "bleaching_perc", "type": "quantitative", "title": "Percentage of interviewed residents concerned about threat", "format": ".2%"}
                    ]
                }
            },
            {
            "data": {"name": "QLD_label"},
            "mark": {"type": "text", "fontSize": 20, "color": "darkgray"},
            "encoding": {
                "text": {"field": "state", "type": "nominal"},
                "longitude": {"field": "x"}, 
                "latitude": {"field": "y"}}
            }
        ]
    },{
        "width": 303,
        "height": 360,
        "title": { "text": "Mining" },
        "projection": {"type": "mercator"},
        "view": {"fill": "white"},
        "layer": [
            {
            "data": {
                "name": "GBR_boundary",
                "url": "vegalite_files/maps/GBR_boundary.json",
                "format": {"type": "topojson", "feature": "GBR_boundary"}
            },
            "mark": {"type": "geoshape", "fill": "lightgray", "opacity": 0.5}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland_surrounds.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "darkgray"},
                "encoding": {
                    "color": {
                        "condition": {
                            "test": "datum.properties.code_hasc == AU.QL",
                            "value": "white"
                        }, "value": "lightgray"
                    }
                }
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "white", "stroke": "darkgray"}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/NRM_regions_2020.json",
                    "format": {"type": "topojson", "feature": "NRM_regions_2020"}
                },
                "transform": [{
                    "lookup": "properties.NRM_REGION",
                    "from": {
                        "data": {"url": "vegalite_files/data/resident_threats.csv"},
                        "key": "NRM",
                        "fields": ["population", "perc_interviewed", "mining_total", "mining_perc"]
                    }
                }],
                "mark": {
                    "type": "geoshape", 
                    "stroke": "darkgray",
                    "opacity": 0.5
                },
                "encoding": {
                    "color": {
                        "field": "mining_perc",
                        "type": "quantitative",
                        "scale": {
                            "domain": [0,0.45]
                        },
                    "legend": {
                        "title": "% of residents"
                    }
                    },
                    "tooltip": [
                        {"field": "properties.NRM_REGION", "type": "nominal", "title": "NRM Region"},
                        {"field": "population", "type": "quantitative", "title": "Population", "format": ","},
                        {"field": "perc_interviewed", "type": "quantitative", "title": "Percentage of population interviewed", "format": ".3%"},
                        {"field": "mining_total", "type": "quantitative", "title": "Total number of interviewed residents concerned about threat"},
                        {"field": "mining_perc", "type": "quantitative", "title": "Percentage of interviewed residents concerned about threat", "format": ".2%"}
                    ]
                }
            },
            {
            "data": {"name": "QLD_label"},
            "mark": {"type": "text", "fontSize": 20, "color": "darkgray"},
            "encoding": {
                "text": {"field": "state", "type": "nominal"},
                "longitude": {"field": "x"}, 
                "latitude": {"field": "y"}}
            }
        ]
    },{
        "width": 303,
        "height": 360,
        "title": { "text": "Tourism" },
        "projection": {"type": "mercator"},
        "view": {"fill": "white"},
        "layer": [
            {
            "data": {
                "name": "GBR_boundary",
                "url": "vegalite_files/maps/GBR_boundary.json",
                "format": {"type": "topojson", "feature": "GBR_boundary"}
            },
            "mark": {"type": "geoshape", "fill": "lightgray", "opacity": 0.5}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland_surrounds.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "darkgray"},
                "encoding": {
                    "color": {
                        "condition": {
                            "test": "datum.properties.code_hasc == AU.QL",
                            "value": "white"
                        }, "value": "lightgray"
                    }
                }
            },
            {
                "data": {
                    "url": "vegalite_files/maps/queensland.json",
                    "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
                },
                "mark": {"type": "geoshape", "fill": "white", "stroke": "darkgray"}
            },
            {
                "data": {
                    "url": "vegalite_files/maps/NRM_regions_2020.json",
                    "format": {"type": "topojson", "feature": "NRM_regions_2020"}
                },
                "transform": [{
                    "lookup": "properties.NRM_REGION",
                    "from": {
                        "data": {"url": "vegalite_files/data/resident_threats.csv"},
                        "key": "NRM",
                        "fields": ["population", "perc_interviewed", "tourism_total", "tourism_perc"]
                    }
                }],
                "mark": {
                    "type": "geoshape", 
                    "stroke": "darkgray",
                    "opacity": 0.5
                },
                "encoding": {
                    "color": {
                        "field": "tourism_perc",
                        "type": "quantitative",
                        "scale": {
                            "domain": [0,0.45]
                        },
                    "legend": {
                        "title": "% of residents"
                    }
                    },
                    "tooltip": [
                        {"field": "properties.NRM_REGION", "type": "nominal", "title": "NRM Region"},
                        {"field": "population", "type": "quantitative", "title": "Population", "format": ","},
                        {"field": "perc_interviewed", "type": "quantitative", "title": "Percentage of population interviewed", "format": ".3%"},
                        {"field": "tourism_total", "type": "quantitative", "title": "Total number of interviewed residents concerned about threat"},
                        {"field": "tourism_perc", "type": "quantitative", "title": "Percentage of interviewed residents concerned about threat", "format": ".2%"}
                    ]
                }
            },
            {
            "data": {"name": "QLD_label"},
            "mark": {"type": "text", "fontSize": 20, "color": "darkgray"},
            "encoding": {
                "text": {"field": "state", "type": "nominal"},
                "longitude": {"field": "x"}, 
                "latitude": {"field": "y"}}
            }
        ]
    }
]
}